<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Store Class Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset="utf-8">
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
  </head>
  <body>

    <a name="//apple_ref/swift/Class/Store" class="dashAnchor"></a>

    <a title="Store Class Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="../index.html">
          Suas Docs
        </a>
         (91% documented)
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/Zendesk/Suas-iOS/tree/master">
            <img class="header-icon" src="../img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="../index.html">Suas Reference</a>
      <img class="carat" src="../img/carat.png" />
      Store Class Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/BlockMiddleware.html">BlockMiddleware</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/BlockReducer.html">BlockReducer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/CombinedReducer.html">CombinedReducer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/Store.html">Store</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Global Variables.html">Global Variables</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Global Variables.html#/s:4Suas12alwaysFilterSbyp_yptcv">alwaysFilter</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Global Variables.html#/s:4Suas13defaultLoggerySScv">defaultLogger</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Global Variables.html#/s:4Suas18stateChangedFilterSbyp_yptcv">stateChangedFilter</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/Suas.html">Suas</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Functions.html#/s:4Suas1poiAA10Middleware_pAaC_p_AaC_ptF">+(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Functions/+(_:_:).html">+(_:_:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols.html#/s:4Suas6ActionP">Action</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/AsyncAction.html">AsyncAction</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/Middleware.html">Middleware</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/Reducer.html">Reducer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/SuasDynamicEquatable.html">SuasDynamicEquatable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Structs.html">Structs</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/ActionSubscription.html">ActionSubscription</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/AsyncMiddleware.html">AsyncMiddleware</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/BlockAsyncAction.html">BlockAsyncAction</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/DiskReadAsyncAction.html">DiskReadAsyncAction</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/DiskWriteAsyncAction.html">DiskWriteAsyncAction</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/LoggerMiddleware.html">LoggerMiddleware</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/State.html">State</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/Subscription.html">Subscription</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/URLSessionAsyncAction.html">URLSessionAsyncAction</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Typealiases.html">Typealiases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Typealiases.html#/s:4Suas22ActionListenerFunctiona">ActionListenerFunction</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Typealiases.html#/s:4Suas29DiskReadActionCompletionBlocka">DiskReadActionCompletionBlock</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Typealiases.html#/s:4Suas30DiskWriteActionCompletionBlocka">DiskWriteActionCompletionBlock</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Typealiases.html#/s:4Suas14FilterFunctiona">FilterFunction</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Typealiases.html#/s:4Suas16ListenerFunctiona">ListenerFunction</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Typealiases.html#/s:4Suas8StateKeya">StateKey</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Typealiases.html#/s:4Suas13StateSelectora">StateSelector</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Typealiases.html#/s:4Suas31URLSessionActionCompletionBlocka">URLSessionActionCompletionBlock</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            <h1>Store</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight"><code><span class="kd">final</span> <span class="kd">public</span> <span class="kd">class</span> <span class="kt">Store</span></code></pre>

                </div>
              </div>
            <p>Store that contains the application state, the reducer logic, the middleware and the listeners</p>

<p>The store contains four components:
- <strong>state</strong>: represents the application state. This state is partitioned into state keys. Each key can represents a full application screen, flow, or view controller.
- <strong>reducer</strong> represents the logic to update the state. A reducer mainly provides a function that updates the state for a paticular action.
- <strong>middleware</strong>: an object (or list of objects) that intercept an action and can enrich or alter it before finally dispatching it to the reducer.
- <strong>listener</strong>: a function that gets called when a state is changed.</p>

          </div>
        </section>

        <section class="section">
          <div class="section-content">
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4Suas5StoreC5stateAA5StateVv"></a>
                    <a name="//apple_ref/swift/Property/state" class="dashAnchor"></a>
                    <a class="token" href="#/s:4Suas5StoreC5stateAA5StateVv">state</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Get the current state</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">state</span><span class="p">:</span> <span class="kt"><a href="../Structs/State.html">State</a></span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/Zendesk/Suas-iOS/Sources/Store.swift#L22">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4Suas5StoreC8dispatchyAA6Action_p6action_tF"></a>
                    <a name="//apple_ref/swift/Method/dispatch(action:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:4Suas5StoreC8dispatchyAA6Action_p6action_tF">dispatch(action:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Dispatches an action to the store</p>

<div class="aside aside-parameter">
    <p class="aside-title">Parameter</p>
    Parameter action: the action to dispatch

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">dispatch</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="kt"><a href="../Protocols.html#/s:4Suas6ActionP">Action</a></span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/Zendesk/Suas-iOS/Sources/Store.swift#L65-L78">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4Suas5StoreC11addListenerAA12SubscriptionVyxGxm12forStateType_SSSg8stateKeySbx_xtcSg2ifyxc8callbacktlF"></a>
                    <a name="//apple_ref/swift/Method/addListener(forStateType:stateKey:if:callback:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:4Suas5StoreC11addListenerAA12SubscriptionVyxGxm12forStateType_SSSg8stateKeySbx_xtcSg2ifyxc8callbacktlF">addListener(forStateType:stateKey:if:callback:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Add a listener to the store. The listener will be notified when the state changes.</p>

<p><li>Parameters:</p>

<p><ul>
<li>type: The type of the state to listen to. If the state type is not found, the listener will not be notified.</li>
<li>stateKey: (Optional) the state key to listen to. When not passed (or passing nil) the type name from <code>forStateType</code> will be used.
Only pass when the state key for the state was changed in the reducer (99% of the times you dont need to set this parameter)</li>
<li>filterBlock: (Optional) block that receives the old state and the new state and it decides wether the notification for the listener should be sent or not.
When not set, the listener is notified whenever the state changed.</li>
<li>callback: Notification block called with the new state when the store&rsquo;s state changed.</li>
</ul></li>
<div class="aside aside-returns">
    <p class="aside-title">Returns</p>
    The Listener&rsquo;s subscription that can be used to remove the notification and for other listener related stuff.</p>

<p></div>
<a href='#example' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='example'>Example</h1>
<a href='#adding-a-listener' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='adding-a-listener'>Adding a listener</h2></p>

<p>Add a simple listener for a <code>MyState</code> state type</p>

<pre class="highlight plaintext"><code>let subscription = store.addListener(forStateType: MyState.self) { newState in
  // Do something with the state
}
</code></pre>

<p><a href='#adding-a-listener-with-a-filterblock' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='adding-a-listener-with-a-filterblock'>Adding a listener with a filterBlock</h2></p>

<p>Adding a listener for a state of <code>TodoItemsState</code> type with a filter block.
In the filterBlock we check that the new state has more items than the old state.
The Listener will be notified only if the filterBlock returns true.</p>

<pre class="highlight plaintext"><code>let subscription = store.addListener(
  forStateType: TodoItemsState.self,
  if: { old, new in return old.todos.count &gt; new.todos.count }) { newState in
    // Do something with the state
}
</code></pre>

<p><a href='#adding-a-listener-with-a-state-key' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='adding-a-listener-with-a-state-key'>Adding a listener with a state key</h2></p>

<p>Adding a listener for a state of <code>TodoItemsState</code> type, the reducer registered the state key to <q>todos</q></p>

<pre class="highlight plaintext"><code>let subscription = store.addListener(forStateType: TodoItemsState.self, stateKey: "todos") { newState in
  // Do something with the state
}
</code></pre>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="n">addListener</span><span class="o">&lt;</span><span class="kt">StateType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">forStateType</span> <span class="nv">type</span><span class="p">:</span> <span class="kt">StateType</span><span class="o">.</span><span class="k">Type</span><span class="p">,</span>
                                     <span class="nv">stateKey</span><span class="p">:</span> <span class="kt"><a href="../Typealiases.html#/s:4Suas8StateKeya">StateKey</a></span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
                                     <span class="k">if</span> <span class="nv">filterBlock</span><span class="p">:</span> <span class="kt"><a href="../Typealiases.html#/s:4Suas14FilterFunctiona">FilterFunction</a></span><span class="o">&lt;</span><span class="kt">StateType</span><span class="o">&gt;</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
                                     <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">StateType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">())</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Structs/Subscription.html">Subscription</a></span><span class="o">&lt;</span><span class="kt">StateType</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/Zendesk/Suas-iOS/Sources/Store.swift#L128-L137">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4Suas5StoreC11addListenerAA12SubscriptionVyxGSbAA5StateV_AItcSg2if_xSgAIc13stateSelectoryxc8callbacktlF"></a>
                    <a name="//apple_ref/swift/Method/addListener(if:stateSelector:callback:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:4Suas5StoreC11addListenerAA12SubscriptionVyxGSbAA5StateV_AItcSg2if_xSgAIc13stateSelectoryxc8callbacktlF">addListener(if:stateSelector:callback:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Add a listener to the store with a stateSelector</p>

<p><li>Parameters:</p>

<p><ul>
<li>filterBlock: (Optional) block that receives the old state and the new state and it decides wether the notification for the listener should be sent or not.
When not set, the listener is notified whenever the state changed.</li>
<li>stateSelector: state selector block that selects a part of the full state</li>
<li>callback: Notification block called with the new state when the store&rsquo;s state changed.</li>
</ul></li>
<div class="aside aside-returns">
    <p class="aside-title">Returns</p>
    The Listener&rsquo;s subscription that can be used to remove the notification and for other listener related stuff.</p>

<p></div>
<a href='#example' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='example'>Example</h1>
<a href='#adding-a-listener-with-a-state-selector' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='adding-a-listener-with-a-state-selector'>Adding a listener with a state selector</h2></p>

<p>Add a simple listener for the full state with a state selector that selects part of it.</p>

<p>Create a state selector that selects and creates a <code>TodoItemsState</code> from the full <code>Store</code> state.</p>

<pre class="highlight plaintext"><code>let stateSelector: StateSelector&lt;TodoItemsState&gt; = { state in
  // Read values from the store
  let value1 = state.value(forKeyOfType: SomeType.self)
  let value2 = state.value(forKey: "someKey")

  // Create and return a TodoItemsState
  return TodoItemsState(.....)
}
</code></pre>

<p>Add a listener with the state selector and</p>

<pre class="highlight plaintext"><code>let subscription = store.addListener(stateSelector: stateSelector) { newState in
  // newState here is a TodoItemsState
}
</code></pre>

<p><a href='#adding-a-listener-with-a-state-selector-and-a-filter-block' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='adding-a-listener-with-a-state-selector-and-a-filter-block'>Adding a listener with a state selector and a filter block</h2></p>

<p>Add a simple listener for the full state with a state selector that selects part of it and a filter block that decide when to notify.</p>

<p>Create a state selector that selects and creates a <code>TodoItemsState</code> from the full <code>Store</code> state.</p>

<pre class="highlight plaintext"><code>let stateSelector: StateSelector&lt;TodoItemsState&gt; = { state in
  // Read values from the store
  let value1 = state.value(forKeyOfType: SomeType.self)
  let value2 = state.value(forKey: "someKey")

  // Create and return a TodoItemsState
  return TodoItemsState(.....)
}
</code></pre>

<p>Add a filter block that decides when to notify</p>

<pre class="highlight plaintext"><code>let filterBlock: FilterFunction&lt;State&gt; = { oldState, newState in
  // Read a string from the oldState and newState
  // oldState and newState are the full Store state
  let value1 = oldState.value(forKey: "someKey", ofType: String.self)
  let value2 = newState.value(forKey: "someKey", ofType: String.self)

  // Compare
  return value1 != value2
}
</code></pre>

<p>Add a listener with the state selector and</p>

<pre class="highlight plaintext"><code>let subscription = store.addListener(stateSelector: stateSelector) { newState in
  // newState here is a TodoItemsState
}
</code></pre>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="n">addListener</span><span class="o">&lt;</span><span class="kt">StateType</span><span class="o">&gt;</span><span class="p">(</span><span class="k">if</span> <span class="nv">filterBlock</span><span class="p">:</span> <span class="kt"><a href="../Typealiases.html#/s:4Suas14FilterFunctiona">FilterFunction</a></span><span class="o">&lt;</span><span class="kt"><a href="../Structs/State.html">State</a></span><span class="o">&gt;</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
                                     <span class="nv">stateSelector</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="kt"><a href="../Typealiases.html#/s:4Suas13StateSelectora">StateSelector</a></span><span class="o">&lt;</span><span class="kt">StateType</span><span class="o">&gt;</span><span class="p">,</span>
                                     <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">StateType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">())</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Structs/Subscription.html">Subscription</a></span><span class="o">&lt;</span><span class="kt">StateType</span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/Zendesk/Suas-iOS/Sources/Store.swift#L211-L217">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4Suas5StoreC11addListenerAA12SubscriptionVyAA5StateVGSbAH_AHtcSg2if_yAHc8callbacktF"></a>
                    <a name="//apple_ref/swift/Method/addListener(if:callback:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:4Suas5StoreC11addListenerAA12SubscriptionVyAA5StateVGSbAH_AHtcSg2if_yAHc8callbacktF">addListener(if:callback:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Add a listener to the store. The listener will be notified when the state changes.
The listener will be notified with the full state when </p>

<p><li>Parameters:</p>

<p><ul>
<li>filterBlock: (Optional) block that receives the old state and the new state and it decides wether the notification for the listener should be sent or not.
When not set, the listener is notified whenever the state changed.</li>
<li>callback: Notification block called with the new state when the store&rsquo;s state changed.</li>
</ul></li>
<div class="aside aside-returns">
    <p class="aside-title">Returns</p>
    The Listener&rsquo;s subscription that can be used to remove the notification and for other listener related stuff.</p>

<p></div>
<a href='#example' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='example'>Example</h1>
<a href='#adding-a-listener' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='adding-a-listener'>Adding a listener</h2></p>

<p>Add a simple listener for the full state.</p>

<pre class="highlight plaintext"><code>let subscription = addListener { newState in
  // Do something with the state

  // Get value of Any? Type with key "TheKey"
  let value1 = newState.value(forKey: "TheKey")

  // Get value of MyState? Type with key "MyState" (Key value = the type of the state we want)
  let value2 = newState.value(forKeyOfType: MyState.self)

  // Get value of MyState? Type with key "TheKey"
  let value3 = newState.value(forKey: "TheKey", ofType: MyState.self)
}
</code></pre>

<p><a href='#adding-a-listener-with-a-filterblock' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='adding-a-listener-with-a-filterblock'>Adding a listener with a filterBlock</h2></p>

<p>Adding a listener for the full state with a filter block.
In the filterBlock we check that the new state has more than 10 items.
The Listener will be notified only if the filterBlock returns true.</p>

<pre class="highlight plaintext"><code>let subscription = store.addListener(if: { oldState, newState in

  // Read values from the oldState and the newState
  let old = oldState.value(forKeyOfType: TodoItemsState.self)!
  let new = newState.value(forKeyOfType: TodoItemsState.self)!

  return new.todos.count &gt; 10
}) { newState in
  // Do something with the state
}
</code></pre>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">addListener</span><span class="p">(</span><span class="k">if</span> <span class="nv">filterBlock</span><span class="p">:</span> <span class="kt"><a href="../Typealiases.html#/s:4Suas14FilterFunctiona">FilterFunction</a></span><span class="o">&lt;</span><span class="kt"><a href="../Structs/State.html">State</a></span><span class="o">&gt;</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span>
                          <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt"><a href="../Structs/State.html">State</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">())</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Structs/Subscription.html">Subscription</a></span><span class="o">&lt;</span><span class="kt"><a href="../Structs/State.html">State</a></span><span class="o">&gt;</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/Zendesk/Suas-iOS/Sources/Store.swift#L265-L271">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4Suas5StoreC17addActionListenerAA0D12SubscriptionVyAA0D0_pc06actionE0_tF"></a>
                    <a name="//apple_ref/swift/Method/addActionListener(actionListener:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:4Suas5StoreC17addActionListenerAA0D12SubscriptionVyAA0D0_pc06actionE0_tF">addActionListener(actionListener:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Add a new action listner to the store. Action listeners will be notified whenever a new action is dispatched.
Inside the action notification you cast to the specific ation and read the payload of the action.</p>

<div class="aside aside-parameter">
    <p class="aside-title">Parameter</p>
    Parameter actionListener: Notification block called when an action happens.

</div>

<div class="aside aside-returns">
    <p class="aside-title">Returns</p>
    The Listener&rsquo;s subscription that can be used to remove the notification and for other listener related stuff.

</div>

<p><a href='#example' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='example'>Example</h1></p>

<p>Add an action listener, this action listener will be notified when an action is dispatched.</p>

<pre class="highlight plaintext"><code>let subscription = addActionListener { action in

  // Cast to some of your actions
  if let action = action as? MyButtonClickedAction {
  }

  // Cast to some other action
  if let action = action as? SomeOtherAction {
  }
}
</code></pre>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">addActionListener</span><span class="p">(</span><span class="nv">actionListener</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="kt"><a href="../Typealiases.html#/s:4Suas22ActionListenerFunctiona">ActionListenerFunction</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt"><a href="../Structs/ActionSubscription.html">ActionSubscription</a></span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/Zendesk/Suas-iOS/Sources/Store.swift#L296-L300">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4Suas5StoreC5resetyyp5state_tF"></a>
                    <a name="//apple_ref/swift/Method/reset(state:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:4Suas5StoreC5resetyyp5state_tF">reset(state:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Reset the store internal state for a particular key. They key will be the dynamic type of state.</p>

<div class="aside aside-parameter">
    <p class="aside-title">Parameter</p>
    Parameter state: the new state

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">reset</span><span class="p">(</span><span class="nv">state</span><span class="p">:</span> <span class="kt">Any</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/Zendesk/Suas-iOS/Sources/Store.swift#L311-L313">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4Suas5StoreC5resetyyp5state_SS6forKeytF"></a>
                    <a name="//apple_ref/swift/Method/reset(state:forKey:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:4Suas5StoreC5resetyyp5state_SS6forKeytF">reset(state:forKey:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Reset the store internal state for a specific key</p>

<ul>
<li>Parameters:

<ul>
<li>state: the new state</li>
<li>key: the state key to set</li>
</ul></li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">reset</span><span class="p">(</span><span class="nv">state</span><span class="p">:</span> <span class="kt">Any</span><span class="p">,</span> <span class="n">forKey</span> <span class="nv">key</span><span class="p">:</span> <span class="kt"><a href="../Typealiases.html#/s:4Suas8StateKeya">StateKey</a></span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/Zendesk/Suas-iOS/Sources/Store.swift#L321-L323">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:4Suas5StoreC14resetFullStateys10DictionaryVySSypGF"></a>
                    <a name="//apple_ref/swift/Method/resetFullState(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:4Suas5StoreC14resetFullStateys10DictionaryVySSypGF">resetFullState(_:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Resets the full internal state with a new state</p>

<div class="aside aside-parameter">
    <p class="aside-title">Parameter</p>
    Parameter state: the state to reset to

</div>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">resetFullState</span><span class="p">(</span><span class="n">_</span> <span class="nv">state</span><span class="p">:</span> <span class="kt">KeyedState</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                      <div class="slightly-smaller">
                        <a href="https://github.com/Zendesk/Suas-iOS/Sources/Store.swift#L329-L331">Show on GitHub</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </section>

      </article>
    </div>
    <section class="footer">
      <p>&copy; 2017 <a class="link" href="http://zendesk.com" target="_blank" rel="external">Omar Abdelhafith</a>. All rights reserved. (Last updated: 2017-08-13)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.7.3</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
